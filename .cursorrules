# Lappy Shoes Project Rules

## Lessons
- Sử dụng Next.js 13+ với App Router
- Tích hợp TypeScript để type-safe
- Sử dụng Tailwind CSS cho styling
- Mongoose cho MongoDB
- Font Awesome cho icons
- Vercel cho deployment
- ImageWithFallback component cho image optimization
- Dynamic imports cho code splitting
- Cache middleware cho API optimization
- JWT và Cookie based auth cho security
- React Hot Toast cho notifications
- Custom Error Boundary cho error handling
- Custom Form Hook cho form validation

## Scratchpad

### Cấu trúc dự án hiện tại:
[X] App Router structure
[X] MongoDB Models
[X] API Routes
[X] Components
[X] Styles
[X] Types

### Các tính năng đã hoàn thành:

1. Authentication & Authorization
[X] JWT token validation cơ bản
[X] Cookie-based authentication
[X] Protected routes
[X] Basic role-based access control
[X] Tích hợp NextAuth.js
  [X] Multiple providers
  [X] Session management
  [X] OAuth integration
[X] Advanced RBAC 
  [X] Detailed permission system
  [X] Role hierarchy
  [X] Dynamic permissions
[X] Token Security
  [X] Refresh token mechanism
  [X] Token rotation
  [X] Token blacklisting
[X] Session Enhancement
  [X] Session tracking
  [X] Rate limiting
  [X] Device management

2. Performance Optimization
[X] Image optimization
[X] Code splitting
[X] Lazy loading
[X] Caching strategies
[X] API route optimization

3. User Experience
[X] Loading states
[X] Error boundaries
[X] Toast notifications
[X] Form validation
[X] Responsive design improvements

4. Security
[ ] Input sanitization
[ ] CSRF protection
[X] Rate limiting
[ ] Security headers
[ ] Data encryption

5. Testing
[ ] Unit tests
[ ] Integration tests
[ ] E2E tests
[ ] Performance tests

6. Monitoring & Analytics
[ ] Error tracking
[ ] Performance monitoring
[ ] User analytics
[ ] SEO optimization

7. Features Enhancement
[ ] Multi-language support
[ ] Dark mode
[ ] Advanced search
[ ] Wishlist
[X] Reviews & ratings
[X] Order tracking
[ ] Payment integration
[ ] Email notifications

### Priority Tasks:
1. Hoàn thiện Security features
   - Input sanitization
   - CSRF protection
   - Security headers
   - Data encryption

2. Implement Testing
   - Setup testing environment
   - Write unit tests
   - Write integration tests
   - Write E2E tests

3. Add Monitoring & Analytics
   - Error tracking
   - Performance monitoring
   - User analytics
   - SEO optimization

4. Enhance User Experience
   [X] Error boundaries
   [X] Toast notifications
   [X] Form validation
   [ ] Dark mode

### Notes:
- Cần review và update dependencies
- Implement best practices cho Next.js 13
- Tối ưu database queries
- Cải thiện error handling
- Thêm documentation 